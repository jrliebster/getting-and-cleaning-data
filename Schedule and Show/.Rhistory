ct_high_max <- 91
#create rule for when to use max and when to use average+6
ct_high_use <- ifelse(ct_high_moving > ct_high_max, ct_high_max, ct_high_moving)
#create low for PS in rate
ct_low_use <- ps_rating_tracker$RRCT_Yes4[ps_rating_tracker$RRPrescreener1 == "zz_TOTAL" & ps_rating_tracker$time_period == "Overall"] - 6
ct_low_max <- 77
ct_low_use <- ifelse(ct_low_use < ct_low_max, ct_low_max, ct_low_use)
#filter for PS In rates outside of bounds for just last week of data
ctlastweekoutside <- ps_rating_tracker %>%
filter(time_period == "Last Week") %>%
subset(RRCT_Yes4 > ct_high_use | RRCT_Yes4 < ct_low_use)
#do the same for Pro
pro_high_moving <- ps_rating_tracker$RRP_Yes6[ps_rating_tracker$RRPrescreener1 == "zz_TOTAL" & ps_rating_tracker$time_period == "Overall"] + 6
#create max when average plus 6 is too high
pro_high_max <- 93
#create rule for when to use max and when to use average+6
pro_high_use <- ifelse(pro_high_moving > pro_high_max, pro_high_max, pro_high_moving)
#create low for PS in rate
pro_low_use <- ps_rating_tracker$RRP_Yes6[ps_rating_tracker$RRPrescreener1 == "zz_TOTAL" & ps_rating_tracker$time_period == "Overall"] - 6
pro_low_max <- 80
pro_low_use <- ifelse(pro_low_use < pro_low_max, pro_low_max, pro_low_use)
#filter for PS In rates outside of bounds for just last week of data
prolastweekoutside <- ps_rating_tracker %>%
filter(time_period == "Last Week") %>%
subset(RRP_Yes6 > pro_high_use | RRP_Yes6 < pro_low_use)
#do the same for Highly Recommend
hr_high_moving <- ps_rating_tracker$RRHR513[ps_rating_tracker$RRPrescreener1 == "zz_TOTAL" & ps_rating_tracker$time_period == "Overall"] + 6
#create max when average plus 6 is too high
hr_high_max <- 22
#create rule for when to use max and when to use average+6
hr_high_use <- ifelse(hr_high_moving > hr_high_max, hr_high_max, hr_high_moving)
#create low for PS in rate
hr_low_use <- ps_rating_tracker$RRP_Yes6[ps_rating_tracker$RRPrescreener1 == "zz_TOTAL" & ps_rating_tracker$time_period == "Overall"] - 6
hr_low_max <- 8
hr_low_use <- ifelse(hr_low_use > hr_low_max, hr_low_max, hr_low_use)
#filter for PS In rates outside of bounds for just last week of data
hrlastweekoutside <- ps_rating_tracker %>%
filter(time_period == "Last Week") %>%
subset(RRHR513 > hr_high_use | RRHR513 < hr_low_use)
View(ps_rating_tracker)
View(psinlastweekoutside)
View(hrlastweekoutside)
View(prolastweekoutside)
View(ctlastweekoutside)
View(ps_rating_tracker)
write_csv(ps_rating_tracker, "PSRatingTracker013117.csv")
View(overall)
View(last_week)
setwd("C:/Users/jules.liebster/Desktop/TNTP/NYCTF/R/Schedule and Show")
#Schedule and Show Tracker: I want to be able to quickly determine the % of candidates who have been invited to interview that schedule interviews and attend them.
# Pull comprehensive data set from TT2 (second tab has output)
# Determine the schedule and show rates for initial interview (phone) and interview (selection)
# look at 14 day (invited at least 14 days ago)
# look at 30 day (invited at least 30 days ago)
# look at schedule and show rates broken down by 30 day direct to selection (were not invited to initial interview) and 30 day PI to SD (went to initial interview first)
# ensure only interview dates in past are included in numerator/denominator for show rates (so those who have not had a chance to attend yet are not included in show rate)
# Considerations/concerns:
#   this should come first, before hiring tracker
# need to filter out last week of events, to account for events not yet finalized
# pull this data weekly on Wednesdays, events are usually finalized on Mondays
###need to use datewhenscheduledinperson for SD date
library(pacman)
p_load(readxl, readr, dplyr, janitor, tidyr, stringr)
comprehensive <- read_csv("comprehensive.csv")
#remove RRAppStatus60 that is anything before Invited to Initial Interview
comprehensive<-comprehensive[ ! comprehensive$RRAppStatus60 %in% c("Account Created", "Prescreened In","Application Started","Eligibility Hold",  "Application Incomplete", "Application Submitted", "Ineligible", "Automated Ineligible", "Prescreened Out"), ]
#keep only useful columns df <- subset(df, select = c(a,c))
comprehensive <- subset(comprehensive, select = c("RRAppUserId3", "RRPrimarySubject8", "RRLocationfromapplication17", "RREverinvitedtophoneinterview31", "RRDateFirstInvitedtoPhoneInterview32", "RRScheduledaphoneinterview33", "RRDatecandidatescheduledfirstphoneinterview34", "RRPhoneinterviewed35", "RRDateofphoneinterview36", "RREverinvitedtoSelectionDay37","RRDateInvitedtoSelectionDay38", "RRScheduledaninpersoninterview39", "RRDatewhenscheduledinpersoninterview40", "RREverInterviewed41", "RRDateofinterview42"))
#change all date variables to date class and consistent format
comprehensive$RRDateofinterview42 <- as.Date(comprehensive$RRDateofinterview42, "%m/%d/%Y")
comprehensive$RRDateFirstInvitedtoPhoneInterview32 <- as.Date(comprehensive$RRDateFirstInvitedtoPhoneInterview32, "%m/%d/%Y")
comprehensive$RRDatecandidatescheduledfirstphoneinterview34 <- as.Date(comprehensive$RRDatecandidatescheduledfirstphoneinterview34, "%m/%d/%Y")
comprehensive$RRDateofphoneinterview36 <- as.Date(comprehensive$RRDateofphoneinterview36, "%m/%d/%Y")
comprehensive$RRDateInvitedtoSelectionDay38 <- as.Date(comprehensive$RRDateInvitedtoSelectionDay38, "%m/%d/%Y")
comprehensive$RRDatewhenscheduledinpersoninterview40 <- as.Date(comprehensive$RRDatewhenscheduledinpersoninterview40, "%m/%d/%Y")
#calculate schedule and show rates for initial interview--need to remove all observations that are "No" for RREverinvitedtophoneinterview31
initialschedulecount <- count(comprehensive, RREverinvitedtophoneinterview31, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialshowcount <- count(comprehensive, RRPhoneinterviewed35, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialschedulecount<-initialschedulecount[!(initialschedulecount$RREverinvitedtophoneinterview31=="No"),]
initialshowcount<-initialshowcount[!(initialshowcount$RRScheduledaphoneinterview33=="No"),]
#calculate schedule and show rates for interview--need to remove all observations that are "No" for RREverinvitedtoSelectionDay37
# interviewschedulecount <- count(comprehensive, RREverinvitedtoSelectionDay37, RRScheduledaninpersoninterview39, wt = NULL, sort = TRUE)
# interviewshowcount <- count(comprehensive, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
# interviewschedulecount<-interviewschedulecount[!(interviewschedulecount$RREverinvitedtoSelectionDay37=="No"),]
# interviewshowcount<-interviewshowcount[!(interviewshowcount$RRScheduledaninpersoninterview39=="No"),]
#next, for both initial and interview, need to filter schedule and show rates for dates that have not occurred yet (remove from show rate)
#then, make 14 and 30 day restrictions (filter for those who were invited 14+ or 30+ days ago)
#Sys.Date() gives current date, filter out anything less than or equal to 14 days before sys.date (same for 30)
#need to remove all future events (including today's date to the past Monday)
#CleanHiredFellows$daysBetweenHCF <- as.Date(CleanHiredFellows$HCFDate.x, format = "%m/%d/%y") - as.Date(CleanHiredFellows$NominationDate.x, format = "%m/%d/%y")
current_date <- Sys.Date()
#create variables with outputs 1 and 0 to determine if candidates were invited to initial and/or interview at least 14 or at least 30 days prior to current date
comprehensive <- comprehensive %>%
mutate (invitedtophoneinterview14day = ifelse(current_date - RRDateFirstInvitedtoPhoneInterview32  >= 14, 1, 0)) %>%
mutate (invitedtophoneinterview30day = ifelse(current_date - RRDateFirstInvitedtoPhoneInterview32  >= 30, 1, 0)) %>%
mutate (invitedtointerview14day = ifelse(current_date - RRDateInvitedtoSelectionDay38  >= 14, 1, 0)) %>%
mutate (invitedtointerview30day = ifelse(current_date - RRDateInvitedtoSelectionDay38  >= 30, 1, 0))
#filters for phone and selection dates in future/prior to this past monday (this needs to come later, as it removes all candidates who did not schedule an interview)
PI_sched_and_show <- comprehensive %>% filter(RRDateofphoneinterview36 < (current_date - 2))
SD_sched_and_show <- comprehensive %>% filter(RRDateofinterview42 < (current_date - 2))
#count sched and show for PI and SD that have been filtered for current date - 2 (issue here is that PI_sched_and_show and SD_sched_and_show only includes those who scheduled)
initialschedulecount14 <- PI_sched_and_show %>%
filter(invitedtophoneinterview14day==1) %>%
count(invitedtophoneinterview14day, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialschedulecount30 <- PI_sched_and_show %>%
filter(invitedtophoneinterview30day==1) %>%
count(invitedtophoneinterview30day, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialshowcount14 <- PI_sched_and_show %>%
filter(invitedtophoneinterview14day==1) %>%
count(invitedtophoneinterview14day, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
initialshowcount30 <- PI_sched_and_show %>%
filter(invitedtophoneinterview30day==1) %>%
count(invitedtophoneinterview30day, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
interviewschedulecount14 <- SD_sched_and_show %>%
filter(invitedtointerview14day==1) %>%
count(invitedtointerview14day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewschedulecount30 <- SD_sched_and_show %>%
filter(nvitedtointerview30day==1) %>%
count(nvitedtointerview30day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewshowcount14 <- SD_sched_and_show %>%
filter(invitedtoeinterview14day==1) %>%
count(invitedtointerview14day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewshowcount30 <- SD_sched_and_show %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RREverInterviewed41, wt = NULL, sort = TRUE)
#calculate days between invite and schedule, schedule and show
comprehensive$phonedaystoschedule <- as.Date(comprehensive$RRDatecandidatescheduledfirstphoneinterview34, format = "%m/%d/%y") - as.Date(comprehensive$RRDateFirstInvitedtoPhoneInterview32, format = "%m/%d/%y")
comprehensive$phonedaystointerview <- as.Date(comprehensive$RRDateofphoneinterview36, format = "%m/%d/%y") - as.Date(comprehensive$RRDatecandidatescheduledfirstphoneinterview34, format = "%m/%d/%y")
comprehensive$interviewdaystoschedule <- as.Date(comprehensive$RRDatewhenscheduledinpersoninterview40, format = "%m/%d/%y") - as.Date(comprehensive$RRDateInvitedtoSelectionDay38, format = "%m/%d/%y")
comprehensive$interviewdaystointerview <- as.Date(comprehensive$RRDateofinterview42, format = "%m/%d/%y") - as.Date(comprehensive$RRDatewhenscheduledinpersoninterview40, format = "%m/%d/%y")
#mean days between invited, scheduled, show
averagedays <- comprehensive %>%
mutate (phoneavgtoschedule = round(mean(comprehensive$phonedaystoschedule, na.rm=TRUE),digits=1),
phoneavgtoshow = round(mean(comprehensive$phonedaystointerview, na.rm=TRUE),digits=1),
interviewavgtoschedule = round(mean(comprehensive$interviewdaystoschedule, na.rm=TRUE),digits=1),
interviewavgtoshow = round(mean(comprehensive$interviewdaystointerview, na.rm=TRUE),digits=1))
averagedays <- comprehensive %>%
summarise (phoneavgtoschedule = round(mean(phonedaystoschedule, na.rm=TRUE),digits=1),
phoneavgtoshow = round(mean(phonedaystointerview, na.rm=TRUE),digits=1),
interviewavgtoschedule = round(mean(interviewdaystoschedule, na.rm=TRUE), digits=1),
interviewavgtoshow = round(mean(interviewdaystointerview, na.rm=TRUE),digits=1))
View(PI_sched_and_show)
interviewschedulecount30 <- SD_sched_and_show %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewshowcount14 <- SD_sched_and_show %>%
filter(invitedtoeinterview14day==1) %>%
count(invitedtointerview14day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewshowcount30 <- SD_sched_and_show %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewshowcount14 <- SD_sched_and_show %>%
filter(invitedtointerview14day==1) %>%
count(invitedtointerview14day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewshowcount30 <- SD_sched_and_show %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RREverInterviewed41, wt = NULL, sort = TRUE)
ed to filter out last week of events, to account for events not yet finalized
# pull this data weekly on Wednesdays, events are usually finalized on Mondays
###need to use datewhenscheduledinperson for SD date
library(pacman)
p_load(readxl, readr, dplyr, janitor, tidyr, stringr)
comprehensive <- read_csv("comprehensive.csv")
#remove RRAppStatus60 that is anything before Invited to Initial Interview
comprehensive<-comprehensive[ ! comprehensive$RRAppStatus60 %in% c("Account Created", "Prescreened In","Application Started","Eligibility Hold",  "Application Incomplete", "Application Submitted", "Ineligible", "Automated Ineligible", "Prescreened Out"), ]
#keep only useful columns df <- subset(df, select = c(a,c))
comprehensive <- subset(comprehensive, select = c("RRAppUserId3", "RRPrimarySubject8", "RRLocationfromapplication17", "RREverinvitedtophoneinterview31", "RRDateFirstInvitedtoPhoneInterview32", "RRScheduledaphoneinterview33", "RRDatecandidatescheduledfirstphoneinterview34", "RRPhoneinterviewed35", "RRDateofphoneinterview36", "RREverinvitedtoSelectionDay37","RRDateInvitedtoSelectionDay38", "RRScheduledaninpersoninterview39", "RRDatewhenscheduledinpersoninterview40", "RREverInterviewed41", "RRDateofinterview42"))
#change all date variables to date class and consistent format
comprehensive$RRDateofinterview42 <- as.Date(comprehensive$RRDateofinterview42, "%m/%d/%Y")
comprehensive$RRDateFirstInvitedtoPhoneInterview32 <- as.Date(comprehensive$RRDateFirstInvitedtoPhoneInterview32, "%m/%d/%Y")
comprehensive$RRDatecandidatescheduledfirstphoneinterview34 <- as.Date(comprehensive$RRDatecandidatescheduledfirstphoneinterview34, "%m/%d/%Y")
comprehensive$RRDateofphoneinterview36 <- as.Date(comprehensive$RRDateofphoneinterview36, "%m/%d/%Y")
comprehensive$RRDateInvitedtoSelectionDay38 <- as.Date(comprehensive$RRDateInvitedtoSelectionDay38, "%m/%d/%Y")
comprehensive$RRDatewhenscheduledinpersoninterview40 <- as.Date(comprehensive$RRDatewhenscheduledinpersoninterview40, "%m/%d/%Y")
#calculate schedule and show rates for initial interview--need to remove all observations that are "No" for RREverinvitedtophoneinterview31
initialschedulecount <- count(comprehensive, RREverinvitedtophoneinterview31, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialshowcount <- count(comprehensive, RRPhoneinterviewed35, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialschedulecount<-initialschedulecount[!(initialschedulecount$RREverinvitedtophoneinterview31=="No"),]
initialshowcount<-initialshowcount[!(initialshowcount$RRScheduledaphoneinterview33=="No"),]
#calculate schedule and show rates for interview--need to remove all observations that are "No" for RREverinvitedtoSelectionDay37
# interviewschedulecount <- count(comprehensive, RREverinvitedtoSelectionDay37, RRScheduledaninpersoninterview39, wt = NULL, sort = TRUE)
# interviewshowcount <- count(comprehensive, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
# interviewschedulecount<-interviewschedulecount[!(interviewschedulecount$RREverinvitedtoSelectionDay37=="No"),]
# interviewshowcount<-interviewshowcount[!(interviewshowcount$RRScheduledaninpersoninterview39=="No"),]
#next, for both initial and interview, need to filter schedule and show rates for dates that have not occurred yet (remove from show rate)
#then, make 14 and 30 day restrictions (filter for those who were invited 14+ or 30+ days ago)
#Sys.Date() gives current date, filter out anything less than or equal to 14 days before sys.date (same for 30)
#need to remove all future events (including today's date to the past Monday)
#CleanHiredFellows$daysBetweenHCF <- as.Date(CleanHiredFellows$HCFDate.x, format = "%m/%d/%y") - as.Date(CleanHiredFellows$NominationDate.x, format = "%m/%d/%y")
current_date <- Sys.Date()
#create variables with outputs 1 and 0 to determine if candidates were invited to initial and/or interview at least 14 or at least 30 days prior to current date
comprehensive <- comprehensive %>%
mutate (invitedtophoneinterview14day = ifelse(current_date - RRDateFirstInvitedtoPhoneInterview32  >= 14, 1, 0)) %>%
mutate (invitedtophoneinterview30day = ifelse(current_date - RRDateFirstInvitedtoPhoneInterview32  >= 30, 1, 0)) %>%
mutate (invitedtointerview14day = ifelse(current_date - RRDateInvitedtoSelectionDay38  >= 14, 1, 0)) %>%
mutate (invitedtointerview30day = ifelse(current_date - RRDateInvitedtoSelectionDay38  >= 30, 1, 0))
#filters for phone and selection dates in future/prior to this past monday (this needs to come later, as it removes all candidates who did not schedule an interview)
PI_sched_and_show <- comprehensive %>% filter(RRDateofphoneinterview36 < (current_date - 2))
SD_sched_and_show <- comprehensive %>% filter(RRDateofinterview42 < (current_date - 2))
#count sched and show for PI and SD that have been filtered for current date - 2 (issue here is that PI_sched_and_show and SD_sched_and_show only includes those who scheduled)
initialschedulecount14 <- PI_sched_and_show %>%
filter(invitedtophoneinterview14day==1) %>%
count(invitedtophoneinterview14day, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialschedulecount30 <- PI_sched_and_show %>%
filter(invitedtophoneinterview30day==1) %>%
count(invitedtophoneinterview30day, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialshowcount14 <- PI_sched_and_show %>%
filter(invitedtophoneinterview14day==1) %>%
count(invitedtophoneinterview14day, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
initialshowcount30 <- PI_sched_and_show %>%
filter(invitedtophoneinterview30day==1) %>%
count(invitedtophoneinterview30day, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
interviewschedulecount14 <- SD_sched_and_show %>%
filter(invitedtointerview14day==1) %>%
count(invitedtointerview14day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewschedulecount30 <- SD_sched_and_show %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewshowcount14 <- SD_sched_and_show %>%
filter(invitedtointerview14day==1) %>%
count(invitedtointerview14day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewshowcount30 <- SD_sched_and_show %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RREverInterviewed41, wt = NULL, sort = TRUE)
#calculate days between invite and schedule, schedule and show
comprehensive$phonedaystoschedule <- as.Date(comprehensive$RRDatecandidatescheduledfirstphoneinterview34, format = "%m/%d/%y") - as.Date(comprehensive$RRDateFirstInvitedtoPhoneInterview32, format = "%m/%d/%y")
comprehensive$phonedaystointerview <- as.Date(comprehensive$RRDateofphoneinterview36, format = "%m/%d/%y") - as.Date(comprehensive$RRDatecandidatescheduledfirstphoneinterview34, format = "%m/%d/%y")
comprehensive$interviewdaystoschedule <- as.Date(comprehensive$RRDatewhenscheduledinpersoninterview40, format = "%m/%d/%y") - as.Date(comprehensive$RRDateInvitedtoSelectionDay38, format = "%m/%d/%y")
comprehensive$interviewdaystointerview <- as.Date(comprehensive$RRDateofinterview42, format = "%m/%d/%y") - as.Date(comprehensive$RRDatewhenscheduledinpersoninterview40, format = "%m/%d/%y")
#mean days between invited, scheduled, show
averagedays <- comprehensive %>%
mutate (phoneavgtoschedule = round(mean(comprehensive$phonedaystoschedule, na.rm=TRUE),digits=1),
phoneavgtoshow = round(mean(comprehensive$phonedaystointerview, na.rm=TRUE),digits=1),
interviewavgtoschedule = round(mean(comprehensive$interviewdaystoschedule, na.rm=TRUE),digits=1),
interviewavgtoshow = round(mean(comprehensive$interviewdaystointerview, na.rm=TRUE),digits=1))
averagedays <- comprehensive %>%
summarise (phoneavgtoschedule = round(mean(phonedaystoschedule, na.rm=TRUE),digits=1),
phoneavgtoshow = round(mean(phonedaystointerview, na.rm=TRUE),digits=1),
interviewavgtoschedule = round(mean(interviewdaystoschedule, na.rm=TRUE), digits=1),
interviewavgtoshow = round(mean(interviewdaystointerview, na.rm=TRUE),digits=1))
#next, need schedule and show rates as a percentage for phone and selection
phoneschedule <- comprehensive %>%
summarise(percent = sum(is.na(RRDatecandidatescheduledfirstphoneinterview34) & invitedtophoneinterview14day == 1)/sum(!is.na(RRDateFirstInvitedtoPhoneInterview32)))
View(phoneschedule)
View(interviewshowcount30)
View(interviewschedulecount30)
View(interviewschedulecount14)
#Schedule and Show Tracker: I want to be able to quickly determine the % of candidates who have been invited to interview that schedule interviews and attend them.
# Pull comprehensive data set from TT2 (second tab has output)
# Determine the schedule and show rates for initial interview (phone) and interview (selection)
# look at 14 day (invited at least 14 days ago)
# look at 30 day (invited at least 30 days ago)
# look at schedule and show rates broken down by 30 day direct to selection (were not invited to initial interview) and 30 day PI to SD (went to initial interview first)
# ensure only interview dates in past are included in numerator/denominator for show rates (so those who have not had a chance to attend yet are not included in show rate)
# Considerations/concerns:
#   this should come first, before hiring tracker
# need to filter out last week of events, to account for events not yet finalized
# pull this data weekly on Wednesdays, events are usually finalized on Mondays
###need to use datewhenscheduledinperson for SD date
library(pacman)
p_load(readxl, readr, dplyr, janitor, tidyr, stringr)
comprehensive <- read_csv("comprehensive.csv")
#remove RRAppStatus60 that is anything before Invited to Initial Interview
comprehensive<-comprehensive[ ! comprehensive$RRAppStatus60 %in% c("Account Created", "Prescreened In","Application Started","Eligibility Hold",  "Application Incomplete", "Application Submitted", "Ineligible", "Automated Ineligible", "Prescreened Out"), ]
#keep only useful columns df <- subset(df, select = c(a,c))
comprehensive <- subset(comprehensive, select = c("RRAppUserId3", "RRPrimarySubject8", "RRLocationfromapplication17", "RREverinvitedtophoneinterview31", "RRDateFirstInvitedtoPhoneInterview32", "RRScheduledaphoneinterview33", "RRDatecandidatescheduledfirstphoneinterview34", "RRPhoneinterviewed35", "RRDateofphoneinterview36", "RREverinvitedtoSelectionDay37","RRDateInvitedtoSelectionDay38", "RRScheduledaninpersoninterview39", "RRDatewhenscheduledinpersoninterview40", "RREverInterviewed41", "RRDateofinterview42"))
#change all date variables to date class and consistent format
comprehensive$RRDateofinterview42 <- as.Date(comprehensive$RRDateofinterview42, "%m/%d/%Y")
comprehensive$RRDateFirstInvitedtoPhoneInterview32 <- as.Date(comprehensive$RRDateFirstInvitedtoPhoneInterview32, "%m/%d/%Y")
comprehensive$RRDatecandidatescheduledfirstphoneinterview34 <- as.Date(comprehensive$RRDatecandidatescheduledfirstphoneinterview34, "%m/%d/%Y")
comprehensive$RRDateofphoneinterview36 <- as.Date(comprehensive$RRDateofphoneinterview36, "%m/%d/%Y")
comprehensive$RRDateInvitedtoSelectionDay38 <- as.Date(comprehensive$RRDateInvitedtoSelectionDay38, "%m/%d/%Y")
comprehensive$RRDatewhenscheduledinpersoninterview40 <- as.Date(comprehensive$RRDatewhenscheduledinpersoninterview40, "%m/%d/%Y")
#calculate schedule and show rates for initial interview--need to remove all observations that are "No" for RREverinvitedtophoneinterview31
initialschedulecount <- count(comprehensive, RREverinvitedtophoneinterview31, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialshowcount <- count(comprehensive, RRPhoneinterviewed35, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialschedulecount<-initialschedulecount[!(initialschedulecount$RREverinvitedtophoneinterview31=="No"),]
initialshowcount<-initialshowcount[!(initialshowcount$RRScheduledaphoneinterview33=="No"),]
#calculate schedule and show rates for interview--need to remove all observations that are "No" for RREverinvitedtoSelectionDay37
# interviewschedulecount <- count(comprehensive, RREverinvitedtoSelectionDay37, RRScheduledaninpersoninterview39, wt = NULL, sort = TRUE)
# interviewshowcount <- count(comprehensive, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
# interviewschedulecount<-interviewschedulecount[!(interviewschedulecount$RREverinvitedtoSelectionDay37=="No"),]
# interviewshowcount<-interviewshowcount[!(interviewshowcount$RRScheduledaninpersoninterview39=="No"),]
#next, for both initial and interview, need to filter schedule and show rates for dates that have not occurred yet (remove from show rate)
#then, make 14 and 30 day restrictions (filter for those who were invited 14+ or 30+ days ago)
#Sys.Date() gives current date, filter out anything less than or equal to 14 days before sys.date (same for 30)
#need to remove all future events (including today's date to the past Monday)
#CleanHiredFellows$daysBetweenHCF <- as.Date(CleanHiredFellows$HCFDate.x, format = "%m/%d/%y") - as.Date(CleanHiredFellows$NominationDate.x, format = "%m/%d/%y")
current_date <- Sys.Date()
#create variables with outputs 1 and 0 to determine if candidates were invited to initial and/or interview at least 14 or at least 30 days prior to current date
comprehensive <- comprehensive %>%
mutate (invitedtophoneinterview14day = ifelse(current_date - RRDateFirstInvitedtoPhoneInterview32  >= 14, 1, 0)) %>%
mutate (invitedtophoneinterview30day = ifelse(current_date - RRDateFirstInvitedtoPhoneInterview32  >= 30, 1, 0)) %>%
mutate (invitedtointerview14day = ifelse(current_date - RRDateInvitedtoSelectionDay38  >= 14, 1, 0)) %>%
mutate (invitedtointerview30day = ifelse(current_date - RRDateInvitedtoSelectionDay38  >= 30, 1, 0))
initialschedulecount14 <- comprehensive %>%
filter(invitedtophoneinterview14day==1) %>%
count(invitedtophoneinterview14day, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
View(initialschedulecount14)
initialschedulecount30 <- comprehensive %>%
filter(invitedtophoneinterview30day==1) %>%
count(invitedtophoneinterview30day, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialshowcount14 <- comprehensive %>%
filter(invitedtophoneinterview14day==1) %>%
count(invitedtophoneinterview14day, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
initialshowcount30 <- comprehensive %>%
filter(invitedtophoneinterview30day==1) %>%
count(invitedtophoneinterview30day, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
interviewschedulecount14 <- comprehensive %>%
filter(invitedtointerview14day==1) %>%
count(invitedtointerview14day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewschedulecount30 <- comprehensive %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewshowcount14 <- comprehensive %>%
filter(invitedtointerview14day==1) %>%
count(invitedtointerview14day, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewshowcount30 <- comprehensive %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RREverInterviewed41, wt = NULL, sort = TRUE)
View(interviewshowcount14)
View(interviewschedulecount14)
View(interviewshowcount14)
initialshowcount14 <- comprehensive %>%
filter(invitedtophoneinterview14day==1) %>%
count(RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
View(initialshowcount14)
initialscheduleshowcount14 <- comprehensive %>%
filter(invitedtophoneinterview14day==1) %>%
count(invitedtophoneinterview14day, RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
View(initialscheduleshowcount14)
initialscheduleshowcount30 <- comprehensive %>%
filter(invitedtophoneinterview30day==1) %>%
count(invitedtophoneinterview30day, RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
#Schedule and Show Tracker: I want to be able to quickly determine the % of candidates who have been invited to interview that schedule interviews and attend them.
# Pull comprehensive data set from TT2 (second tab has output)
# Determine the schedule and show rates for initial interview (phone) and interview (selection)
# look at 14 day (invited at least 14 days ago)
# look at 30 day (invited at least 30 days ago)
# look at schedule and show rates broken down by 30 day direct to selection (were not invited to initial interview) and 30 day PI to SD (went to initial interview first)
# ensure only interview dates in past are included in numerator/denominator for show rates (so those who have not had a chance to attend yet are not included in show rate)
# Considerations/concerns:
#   this should come first, before hiring tracker
# need to filter out last week of events, to account for events not yet finalized
# pull this data weekly on Wednesdays, events are usually finalized on Mondays
###need to use datewhenscheduledinperson for SD date
library(pacman)
p_load(readxl, readr, dplyr, janitor, tidyr, stringr)
comprehensive <- read_csv("comprehensive.csv")
#remove RRAppStatus60 that is anything before Invited to Initial Interview
comprehensive<-comprehensive[ ! comprehensive$RRAppStatus60 %in% c("Account Created", "Prescreened In","Application Started","Eligibility Hold",  "Application Incomplete", "Application Submitted", "Ineligible", "Automated Ineligible", "Prescreened Out"), ]
#keep only useful columns df <- subset(df, select = c(a,c))
comprehensive <- subset(comprehensive, select = c("RRAppUserId3", "RRPrimarySubject8", "RRLocationfromapplication17", "RREverinvitedtophoneinterview31", "RRDateFirstInvitedtoPhoneInterview32", "RRScheduledaphoneinterview33", "RRDatecandidatescheduledfirstphoneinterview34", "RRPhoneinterviewed35", "RRDateofphoneinterview36", "RREverinvitedtoSelectionDay37","RRDateInvitedtoSelectionDay38", "RRScheduledaninpersoninterview39", "RRDatewhenscheduledinpersoninterview40", "RREverInterviewed41", "RRDateofinterview42"))
#change all date variables to date class and consistent format
comprehensive$RRDateofinterview42 <- as.Date(comprehensive$RRDateofinterview42, "%m/%d/%Y")
comprehensive$RRDateFirstInvitedtoPhoneInterview32 <- as.Date(comprehensive$RRDateFirstInvitedtoPhoneInterview32, "%m/%d/%Y")
comprehensive$RRDatecandidatescheduledfirstphoneinterview34 <- as.Date(comprehensive$RRDatecandidatescheduledfirstphoneinterview34, "%m/%d/%Y")
comprehensive$RRDateofphoneinterview36 <- as.Date(comprehensive$RRDateofphoneinterview36, "%m/%d/%Y")
comprehensive$RRDateInvitedtoSelectionDay38 <- as.Date(comprehensive$RRDateInvitedtoSelectionDay38, "%m/%d/%Y")
comprehensive$RRDatewhenscheduledinpersoninterview40 <- as.Date(comprehensive$RRDatewhenscheduledinpersoninterview40, "%m/%d/%Y")
#calculate schedule and show rates for initial interview--need to remove all observations that are "No" for RREverinvitedtophoneinterview31
initialschedulecount <- count(comprehensive, RREverinvitedtophoneinterview31, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialshowcount <- count(comprehensive, RRPhoneinterviewed35, RRScheduledaphoneinterview33, wt = NULL, sort = TRUE)
initialschedulecount<-initialschedulecount[!(initialschedulecount$RREverinvitedtophoneinterview31=="No"),]
initialshowcount<-initialshowcount[!(initialshowcount$RRScheduledaphoneinterview33=="No"),]
#calculate schedule and show rates for interview--need to remove all observations that are "No" for RREverinvitedtoSelectionDay37
# interviewschedulecount <- count(comprehensive, RREverinvitedtoSelectionDay37, RRScheduledaninpersoninterview39, wt = NULL, sort = TRUE)
# interviewshowcount <- count(comprehensive, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
# interviewschedulecount<-interviewschedulecount[!(interviewschedulecount$RREverinvitedtoSelectionDay37=="No"),]
# interviewshowcount<-interviewshowcount[!(interviewshowcount$RRScheduledaninpersoninterview39=="No"),]
#next, for both initial and interview, need to filter schedule and show rates for dates that have not occurred yet (remove from show rate)
#then, make 14 and 30 day restrictions (filter for those who were invited 14+ or 30+ days ago)
#Sys.Date() gives current date, filter out anything less than or equal to 14 days before sys.date (same for 30)
#need to remove all future events (including today's date to the past Monday)
#CleanHiredFellows$daysBetweenHCF <- as.Date(CleanHiredFellows$HCFDate.x, format = "%m/%d/%y") - as.Date(CleanHiredFellows$NominationDate.x, format = "%m/%d/%y")
current_date <- Sys.Date()
#create variables with outputs 1 and 0 to determine if candidates were invited to initial and/or interview at least 14 or at least 30 days prior to current date
comprehensive <- comprehensive %>%
mutate (invitedtophoneinterview14day = ifelse(current_date - RRDateFirstInvitedtoPhoneInterview32  >= 14, 1, 0)) %>%
mutate (invitedtophoneinterview30day = ifelse(current_date - RRDateFirstInvitedtoPhoneInterview32  >= 30, 1, 0)) %>%
mutate (invitedtointerview14day = ifelse(current_date - RRDateInvitedtoSelectionDay38  >= 14, 1, 0)) %>%
mutate (invitedtointerview30day = ifelse(current_date - RRDateInvitedtoSelectionDay38  >= 30, 1, 0))
interviewscheduleshowcount14 <- comprehensive %>%
filter(invitedtointerview14day==1) %>%
count(invitedtointerview14day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewscheduleshowcount30 <- comprehensive %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
View(interviewscheduleshowcount14)
View(interviewscheduleshowcount30)
initialscheduleshowcount30 <- comprehensive %>%
filter(invitedtophoneinterview30day==1) %>%
count(invitedtophoneinterview30day, RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
initialscheduleshowcount14 <- comprehensive %>%
filter(invitedtophoneinterview14day==1) %>%
count(invitedtophoneinterview14day, RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
interviewscheduleshowcount14 <- comprehensive %>%
filter(invitedtointerview14day==1) %>%
count(invitedtointerview14day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewscheduleshowcount30 <- comprehensive %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewscheduleshowcount14 <- comprehensive %>% filter(RRDateofphoneinterview36 < (current_date - 2))
View(interviewscheduleshowcount14)
#count sched and show for PI and SD that have been filtered for current date - 2 (issue here is that PI_sched_and_show and SD_sched_and_show only includes those who scheduled)
initialscheduleshowcount30 <- comprehensive %>%
filter(invitedtophoneinterview30day==1) %>%
count(invitedtophoneinterview30day, RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
initialscheduleshowcount14 <- comprehensive %>%
filter(invitedtophoneinterview14day==1) %>%
count(invitedtophoneinterview14day, RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
interviewscheduleshowcount14 <- comprehensive %>%
filter(invitedtointerview14day==1) %>%
count(invitedtointerview14day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
interviewscheduleshowcount30 <- comprehensive %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
View(initialscheduleshowcount14)
View(comprehensive)
initialscheduleshowcount30 <- comprehensive %>%
filter(invitedtophoneinterview30day==1,
RRDatecandidatescheduledfirstphoneinterview34 < current_date | is.na (RRDatecandidatescheduledfirstphoneinterview34))
View(initialscheduleshowcount30)
initialscheduleshowcount30 <- comprehensive %>%
filter(invitedtophoneinterview30day==1,
RRDatecandidatescheduledfirstphoneinterview34 < current_date | is.na (RRDatecandidatescheduledfirstphoneinterview34)) %>%
count(invitedtophoneinterview30day, RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
View(initialscheduleshowcount30)
initialscheduleshowcount30 <- comprehensive %>%
filter(invitedtophoneinterview30day==1,
RRDatecandidatescheduledfirstphoneinterview34 < (current_date - 2) | is.na (RRDatecandidatescheduledfirstphoneinterview34),
RRDateofphoneinterview36 < (current_date - 2) | is.na (RRDateofphoneinterview36))
View(initialscheduleshowcount30)
initialscheduleshowcount30 <- comprehensive %>%
filter(invitedtophoneinterview30day==1,
RRDatecandidatescheduledfirstphoneinterview34 < (current_date - 2) | is.na (RRDatecandidatescheduledfirstphoneinterview34),
RRDateofphoneinterview36 < (current_date - 2) | is.na (RRDateofphoneinterview36)) %>%
count(invitedtophoneinterview30day, RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
View(initialscheduleshowcount30)
View(initialscheduleshowcount30)
initialscheduleshowcount30 <- comprehensive %>%
filter(invitedtophoneinterview30day==1,
RRDatecandidatescheduledfirstphoneinterview34 < (current_date - 2) | is.na (RRDatecandidatescheduledfirstphoneinterview34),
RRDateofphoneinterview36 < (current_date - 2) | is.na (RRDateofphoneinterview36)) %>%
#count(invitedtophoneinterview30day, RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE) %>%
summarise(show_initial = sum(RRScheduledaphoneinterview33 == "Yes" & RRPhoneinterviewed35 == "Yes", na.rm = TRUE),
not_scheduled_initial = sum(RRScheduledaphoneinterview33 == "No" & RRPhoneinterviewed35 == "No", na.rm = TRUE),
no_show_initial = sum(RRScheduledaphoneinterview33 == "Yes" & RRPhoneinterviewed35 =="No", na.rm =TRUE))
View(initialscheduleshowcount30)
initialscheduleshowcount14 <- comprehensive %>%
filter(invitedtophoneinterview14day==1,
RRDatecandidatescheduledfirstphoneinterview34 < (current_date - 2) | is.na (RRDatecandidatescheduledfirstphoneinterview34),
RRDateofphoneinterview36 < (current_date - 2) | is.na (RRDateofphoneinterview36)) %>%
#count(invitedtophoneinterview14day, RRScheduledaphoneinterview33, RRPhoneinterviewed35, wt = NULL, sort = TRUE)
summarise(show_initial = sum(RRScheduledaphoneinterview33 == "Yes" & RRPhoneinterviewed35 == "Yes", na.rm = TRUE),
not_scheduled_initial = sum(RRScheduledaphoneinterview33 == "No" & RRPhoneinterviewed35 == "No", na.rm = TRUE),
no_show_initial = sum(RRScheduledaphoneinterview33 == "Yes" & RRPhoneinterviewed35 =="No", na.rm =TRUE))
interviewscheduleshowcount14 <- comprehensive %>%
filter(invitedtointerview14day==1) %>%
#count(invitedtointerview14day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
summarise(show_initial = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 == "Yes", na.rm = TRUE),
not_scheduled_initial = sum(RRScheduledaninpersoninterview39 == "No" & RREverInterviewed41 == "No", na.rm = TRUE),
no_show_initial = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 =="No", na.rm =TRUE))
interviewscheduleshowcount30 <- comprehensive %>%
filter(invitedtointerview30day==1) %>%
count(invitedtointerview30day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
View(initialscheduleshowcount14)
View(interviewscheduleshowcount14)
interviewscheduleshowcount14 <- comprehensive %>%
filter(invitedtointerview14day==1) %>%
#count(invitedtointerview14day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
summarise(show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 == "Yes", na.rm = TRUE),
not_scheduled_interview = sum(RRScheduledaninpersoninterview39 == "No" & RREverInterviewed41 == "No", na.rm = TRUE),
no_show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 =="No", na.rm =TRUE))
View(interviewscheduleshowcount30)
View(interviewscheduleshowcount14)
interviewscheduleshowcount30 <- comprehensive %>%
filter(invitedtointerview30day==1) %>%
#count(invitedtointerview30day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
summarise(show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 == "Yes", na.rm = TRUE),
not_scheduled_interview = sum(RRScheduledaninpersoninterview39 == "No" & RREverInterviewed41 == "No", na.rm = TRUE),
no_show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 =="No", na.rm =TRUE))
View(interviewscheduleshowcount30)
interviewscheduleshowcount30 <- comprehensive %>%
filter(invitedtointerview30day==1) %>%
#count(invitedtointerview30day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
summarise(show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 == "Yes", na.rm = TRUE),
not_scheduled_interview = sum(RRScheduledaninpersoninterview39 == "No" & RREverInterviewed41 == "No", na.rm = TRUE),
no_show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 =="No", na.rm =TRUE)) %>%
mutate(schedule_rate = show_interview/(show_interview + no_show_interview))
View(interviewscheduleshowcount30)
View(interviewscheduleshowcount30)
View(interviewscheduleshowcount30)
interviewscheduleshowcount30 <- comprehensive %>%
filter(invitedtointerview30day==1) %>%
#count(invitedtointerview30day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
summarise(show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 == "Yes", na.rm = TRUE),
not_scheduled_interview = sum(RRScheduledaninpersoninterview39 == "No" & RREverInterviewed41 == "No", na.rm = TRUE),
no_show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 =="No", na.rm =TRUE)) %>%
mutate(show_rate = show_interview/(show_interview + no_show_interview))
View(interviewscheduleshowcount30)
(invitedtointerview30day==1),
show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 == "Yes", na.rm = TRUE),
not_scheduled_interview = sum(RRScheduledaninpersoninterview39 == "No" & RREverInterviewed41 == "No", na.rm = TRUE),
no_show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewe
interviewscheduleshowcount30 <- comprehensive %>%
filter(invitedtointerview30day==1) %>%
#count(invitedtointerview30day, RRScheduledaninpersoninterview39, RREverInterviewed41, wt = NULL, sort = TRUE)
summarise(invitedtointerview30day==1),
show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewed41 == "Yes", na.rm = TRUE),
not_scheduled_interview = sum(RRScheduledaninpersoninterview39 == "No" & RREverInterviewed41 == "No", na.rm = TRUE),
no_show_interview = sum(RRScheduledaninpersoninterview39 == "Yes" & RREverInterviewe
